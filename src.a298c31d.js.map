{"version":3,"sources":["js/markup.js","js/api-service.js","index.js"],"names":["makeCardsMarkup","data","map","webformatURL","largeImageURL","tags","likes","views","comments","downloads","join","makeInfoMarkup","name","capital","population","flags","languages","svg","official","Object","values","ApiService","constructor","searchQuery","page","fetchArticles","fetch","console","log","then","r","json","hits","resetPage","query","newQury","refs","searchForm","document","querySelector","cardsContainer","loadMoreBtn","newsApiService","onSearch","e","preventDefault","currentTarget","elements","value","dir","appendCardsMarkup","onLoadMore","insertAdjacentHTML","addEventListener"],"mappings":";AA2CC,aApCD,SAASA,EAAiBC,GACjBA,OAAAA,EACJC,IACC,EAAGC,aAAAA,EAAcC,cAAAA,EAAcC,KAAAA,EAAKC,MAAAA,EAAMC,MAAAA,EAAMC,SAAAA,EAASC,UAAAA,8CAGjDN,WAAsBE,yFAGnBC,8DAGAC,iEAGGC,kEAGCC,qCAKhBC,KAAK,IAGV,SAASC,EAAgBV,GAChBA,OAAAA,EAAKC,IACV,EAAGU,KAAAA,EAAMC,QAAAA,EAASC,WAAAA,EAAYC,MAAAA,EAAOC,UAAAA,sBAClBD,EAAME,aAAaL,EAAKM,oCACvCN,EAAKM,oCAEOL,+BACGC,8BACDK,OAAOC,OAAOJ,UAEnC,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,gBAAA,EAAA,QAAA,eAAA;;AC3C8B,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAhB,MAAMK,EACnBC,cACOC,KAAAA,YAAc,GACdC,KAAAA,KAAO,EAEdC,cAAcF,GAELG,OADPC,QAAQC,IAAI,KAAM,MACXF,2EAA2E,KAAKH,4EAA4E,KAAKC,oBACrKK,KAAKC,GAAKA,EAAEC,QACZF,KAAK5B,IACCuB,KAAAA,MAAQ,EACdG,QAAQC,IAAI3B,GACX0B,QAAQC,IAAI,QAAS,MACd3B,EAAK+B,OAGlBC,YACOT,KAAAA,KAAO,EAEVU,YACK,OAAA,KAAKX,YAEVW,UAAMC,GACHZ,KAAAA,YAAcY,GAvBQ,QAAA,QAAA;;ACyF9B,aAvFD,IAAA,EAAA,QAAA,eA0DA,EAAA,EAAA,QAAA,qBA6BC,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GA5BD,MAAMC,EAAO,CACXC,WAAYC,SAASC,cAAc,gBACnCC,eAAgBF,SAASC,cAAc,YACvCE,YAAaH,SAASC,cAAc,eAEhCG,EAAiB,IAAIrB,EAAJ,QAQvB,SAASsB,EAASC,GAChBA,EAAEC,iBAEFH,EAAeR,MAAQU,EAAEE,cAAcC,SAASxB,YAAYyB,MAC5DN,EAAeT,YACfN,QAAQsB,IAAIP,EAAeR,OAC3BQ,EAAejB,gBAAgBI,KAAKqB,GAGtC,SAASC,IACPT,EAAejB,gBAAgBI,KAAKqB,GAGtC,SAASA,EAAkBlB,GACzBI,EAAKI,eAAeY,mBAAmB,aAAa,EAAgBpB,EAAAA,iBAAAA,IArBtEL,QAAQC,IAAIc,GAEZN,EAAKC,WAAWgB,iBAAiB,SAAUV,GAC3CP,EAAKK,YAAYY,iBAAiB,QAASF","file":"src.a298c31d.js","sourceRoot":"../src","sourcesContent":["\nexport { makeCardsMarkup };\nexport { makeInfoMarkup };\n    \n\n\n\nfunction makeCardsMarkup (data ) {\n  return data\n    .map(\n      ({ webformatURL, largeImageURL,tags,likes,views,comments,downloads }) =>\n        // `<li><img src=\"${flags.svg}\" alt=\"${name.official}\" width=\"50\" height=\"40\">${name.official}</li>`\n        `<div class=\"photo-card\">\n  <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes:${likes}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Views:${views}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Comments:${comments}</b>\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads:${downloads}</b>\n    </p>\n  </div>\n</div>`,\n    )\n    .join('');\n};\n\nfunction makeInfoMarkup (data) {\n  return data.map(\n    ({ name, capital, population, flags, languages }) =>\n      `<h1><img src=\"${flags.svg}\" alt=\"${name.official}\" width=\"60\" height=\"50\">${\n        name.official\n      }</h1>\n      <p>Capital: ${capital}</p>\n      <p>Population: ${population}</p>\n      <p>Languages: ${Object.values(languages)}</p>`,\n  );\n};","export default class ApiService{\n  constructor() { \n    this.searchQuery = \"\";\n    this.page = 1;\n    }\n  fetchArticles(searchQuery) {\n    console.log(\"до\", this);\n    return fetch(`https://pixabay.com/api/?key=27772870-4058b108341efce898c1dbbbe&q=${this.searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&page=${this.page}&per_page=40`)\n      .then(r => r.json())\n      .then(data => {\n        this.page += 1;\n       console.log(data);\n        console.log(\"after\", this);\n        return data.hits;\n      });\n  }\n  resetPage(){\n    this.page = 1;    \n  }\n  get query() {\n    return this.searchQuery;\n  }\n  set query(newQury) {\n    this.searchQuery = newQury;\n  }\n}","// import './css/styles.css';\n// import { fetchCountries } from './js/fetchCountries';\nimport { makeCardsMarkup } from './js/markup';\n// import { makeInfoMarkup } from './js/markup';\n// import debounce from 'lodash.debounce';\n// import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\n// const DEBOUNCE_DELAY = 300;\n\n// const refs = {\n//     inputCountryEl: document.querySelector(\"#search-box\"),\n//     countryListEl:document.querySelector(\".country-list\"),\n//     countryInfoEl: document.querySelector(\".country-info\"),\n// };\n// console.dir(refs.inputCountryEl);\n// console.dir(refs.countryListEl);\n// console.dir(refs.countryInfoEl);\n\n// refs.inputCountryEl.addEventListener(\"input\",  debounce(onInputCountry, DEBOUNCE_DELAY));\n\n\n// function onInputCountry (e){\n//   const inputText = e.target.value.trim();\n\n//     if (!inputText) {\n//         refs.countryListEl.innerHTML = '';\n//         refs.countryInfoEl.innerHTML = '';    \n//     return;\n//   }\n\n//   fetchCountries(inputText)\n//     .then(data => {\n//             if (data.length > 10) {\n//         Notify.info('Too many matches found. Please enter a more specific name');\n//         return;\n//       }\n//       renderMarkup(data);\n//     })\n//       .catch(err => {\n//         refs.countryListEl.innerHTML = '';\n//         refs.countryInfoEl.innerHTML = '';\n//           Notify.failure('Oops, there is no country with that name');\n//     });\n// };\n\n// function renderMarkup (data ) {\n//   if (data.length === 1) {\n//    refs.countryListEl.innerHTML = '';\n//     const markupInfo = makeInfoMarkup(data);\n//     refs.countryInfoEl.innerHTML = markupInfo;\n//   } else {\n//      refs.countryInfoEl.innerHTML = '';\n//     const markupList = makeListMarkup(data);\n//     refs.countryListEl.innerHTML = markupList;\n//   }\n// };\n\n// fetch(\"https://pixabay.com/api/?key=27772870-4058b108341efce898c1dbbbe&q=cat&image_type=photo\")\n//   .then(r => r.json())\n//   .then(console.log);\nimport ApiService from \"./js/api-service\";\nconst refs = {\n  searchForm: document.querySelector(\".search-form\"),\n  cardsContainer: document.querySelector(\".gallery\"),\n  loadMoreBtn: document.querySelector(\".load-more\")\n};\nconst newsApiService = new ApiService();\nconsole.log(newsApiService);\n\nrefs.searchForm.addEventListener(\"submit\", onSearch);\nrefs.loadMoreBtn.addEventListener(\"click\", onLoadMore);\n\n\n\nfunction onSearch(e) {\n  e.preventDefault();\n\n  newsApiService.query = e.currentTarget.elements.searchQuery.value;\n  newsApiService.resetPage();\n  console.dir(newsApiService.query);\n  newsApiService.fetchArticles().then(appendCardsMarkup);\n};\n\nfunction onLoadMore() {\n  newsApiService.fetchArticles().then(appendCardsMarkup);\n};\n\nfunction appendCardsMarkup(hits) {\n  refs.cardsContainer.insertAdjacentHTML('beforeend', makeCardsMarkup(hits));\n}\n"]}